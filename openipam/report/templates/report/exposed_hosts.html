{% extends "report/base.html" %} {% load static %} {% block page_title %}Exposed Hosts Report{% endblock %} {% block extrahead %} {{ block.super }}
<link rel="stylesheet" href="{% static 'core/css/dataTables.bootstrap.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'datatables-responsive/css/dataTables.responsive.css' %}" type="text/css" />
<style type="text/css">
  #content {
    background: #fff;
    padding: 20px;
  }

  .dataTables_empty {
    font-size: 18px;
    font-weight: bold;
    background: #fcf8e3;
  }
</style>

<script type="text/javascript" src="{% static 'datatables/media/js/jquery.dataTables.min.js' %}"></script>
<script type="text/javascript" src="{% static 'datatables-responsive/js/dataTables.responsive.js' %}"></script>
<script type="text/javascript" src="{% static 'core/js/dataTables.bootstrap.js' %}"></script>

<script type="text/javascript">
  const escapeHtml = (t) => $('<div />').text(t).html();  

  $(function () {
    $("#server_link").addClass("active");
    $("#reports_dropdown").addClass("active");

    $("#result_list").DataTable({
      ajax: "/api/reports/serverhosts?format=json",
      columns: [{
          data: "hostname",
          orderable: true,
        },
        {
          data: "mac",
          orderable: true,
          render: (t) => `<a href="/hosts/${escapeHtml(t).replace(/\:/g, "")}/detail">${escapeHtml(t)}</a>`,
        },
        {
          data: "description",
          orderable: false,
          render: escapeHtml,
        },
        {
          data: "addresses",
          orderable: true,
        },
        {
          data: "users",
          orderable: false,
        },
        {
          data: "groups",
          orderable: false,
        },
        {
          data: "nac_profiles",
          orderable: false,
        },
      ],
      paging: false,
      dom: '<"paginator"lpi<"clear">>',
    });
  });
</script>
{% endblock %} {% block content %}
<div class="row">
  <div class="col-lg-12">
    <h1>Exposed Hosts</h1>
    <div class="pull-right large">
      <a href="{% url 'core:api:api_reports_server_hosts' %}?format=csv">
        Download Report (CSV)
      </a>
    </div>
    <p>Hosts whose nac-profile starts with "expose_".</p>
    <table id="result_list" class="table table-striped table-condensed table-bordered">
      <tr>
        <thead>
          <th scope="col">Host</th>
          <th scope="col">Mac Address</th>
          <th scope="col">Description</th>
          <th scope="col">IP Address(es)</th>
          <th scope="col">User Owner(s)</th>
          <th scope="col">Group Owner(s)</th>
          <th scope="col">NAC Profile(s)</th>
        </thead>
      </tr>
      <tbody></tbody>
    </table>
  </div>
</div>
{% endblock %}
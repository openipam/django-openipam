{% extends "report/base.html" %} {% load static %}
<!---->
{% block page_title %} Disabled Hosts Report {%endblock %} {% block extrahead %}
{{ block.super }}
<style type="text/css">
	#content {
		background: #fff;
		padding: 20px;
	}
</style>

<script
	type="text/javascript"
	src="{% static 'report/js/renewal_stats.js' %}"
	defer
></script>

<script type="text/javascript"></script>

{% endblock %} {% block content %}

<div class="row">
	<div class="col-lg-12">
		<h1>Host Renewal Report</h1>

		<p>
			This report shows host renewals over a certain period of time (default is
			the past week). It includes hosts which were automatically renewed in the
			selected timeframe, and all hosts whose owners were notified of the
			impending expiration (whether they were renewed or not).
		</p>

		<div id="date_selectors" class="input-group mb-3">
			<span class="input-group-addon">Date Range: </span>
			<input
				class="form-control"
				type="date"
				id="start_date"
				name="start_date"
				value=""
				aria-label="Start date"
			/>
			<span class="input-group-addon">to</span>
			<input
				class="form-control"
				type="date"
				id="end_date"
				name="end_date"
				value=""
				aria-label="End date"
			/>
			<span class="input-group-btn">
				<button id="update_button" class="btn btn-primary">Update</button>
			</span>
		</div>

		<h2>Summary</h2>
		<table
			id="summary_table"
			class="table table-striped table-condensed table-bordered"
		>
			<thead>
				<tr>
					<th>Automatically Renewed</th>
					<th>Manually Renewed</th>
					<th>Hosts Not Renewed</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>
						<a href="#auto_renewal_table" id="auto_count">0</a>
					</td>
					<td>
						<a href="#manual_renewal_table" id="manual_count"
							>{{ hosts_notified_today|length }}</a
						>
					</td>
					<td>
						<a href="#unrenewed_table" id="unrenewed_count"
							>{{ hosts_not_renewed_today|length }}</a
						>
					</td>
				</tr>
			</tbody>
		</table>

		<h2>Hosts Automatically Renewed</h2>
		<table
			id="auto_renewal_table"
			class="table table-striped table-condensed table-bordered"
		>
			<thead>
				<tr>
					<th>Host</th>
					<th>Mac Address</th>
					<th>Expires</th>
					<th>Last Changed</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td colspan="4" style="font-style: italic">Loading...</td>
				</tr>
			</tbody>
		</table>

		<h2>Hosts Manually Renewed After Notification</h2>
		<table
			id="manual_renewal_table"
			class="table table-striped table-condensed table-bordered"
		>
			<thead>
				<tr>
					<th>Host</th>
					<th>Mac Address</th>
					<th>Expires</th>
					<th>Last Changed</th>
				</tr>
			</thead>

			<tbody>
				<tr>
					<td colspan="4" style="font-style: italic">Loading...</td>
				</tr>
			</tbody>
		</table>

		<h2>Hosts Not Renewed</h2>
		<table
			id="unrenewed_table"
			class="table table-striped table-condensed table-bordered"
		>
			<thead>
				<tr>
					<th>Host</th>
					<th>Mac Address</th>
					<th>Expires</th>
					<th>Last Notified</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td colspan="4" style="font-style: italic">Loading...</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
{% endblock %}
